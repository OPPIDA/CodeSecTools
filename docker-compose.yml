services:
  test:
    image: cstools_test
    build:
      context: .
      dockerfile: tests/Dockerfile

    tty: true
    stdin_open: true

    volumes:
      - type: bind
        source: ${HOME}/.codesectools/config
        target: /root/.codesectools/config
        read_only: true
      
      - pytest-cache:/app/.pytest_cache
    
    environment:
      _TYPER_STANDARD_TRACEBACK: 1

volumes:
  pytest-cache: